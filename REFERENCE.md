# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

* [`poudriere`](#poudriere): Poudriere is a tool that lets you build PkgNG packages from ports.  This is cool because it gives you the flexibility of custom port options 
* [`poudriere::xbuild`](#poudrierexbuild): Install cross-building dependencies

### Defined types

* [`poudriere::env`](#poudriereenv): This resource creates a build environment for a given release and architecture of FreeBSD. Passing in custom options gives you the ability to
* [`poudriere::portstree`](#poudriereportstree): This resource creates a ports tree. You can have multiple ports trees for different building purposes. Automatic periodic updating of package

### Data types

* [`Poudriere::Architecture`](#poudrierearchitecture): The architecture to target when building packages
* [`Poudriere::Cron_interval`](#poudrierecron_interval): Parameters to configure Poudriere's cron resources
* [`Poudriere::Fetch_method`](#poudrierefetch_method): A supported fetch method for poudriere

## Classes

### <a name="poudriere"></a>`poudriere`

Poudriere is a tool that lets you build PkgNG packages from ports.  This is
cool because it gives you the flexibility of custom port options with all the
awesomeness of packages.  The below class prepares the build environment.
For the configuration of the build environment, see Class[poudriere::env].

#### Parameters

The following parameters are available in the `poudriere` class:

* [`zpool`](#zpool)
* [`zrootfs`](#zrootfs)
* [`freebsd_host`](#freebsd_host)
* [`resolv_conf`](#resolv_conf)
* [`ccache_enable`](#ccache_enable)
* [`ccache_dir`](#ccache_dir)
* [`poudriere_base`](#poudriere_base)
* [`poudriere_data`](#poudriere_data)
* [`use_portlint`](#use_portlint)
* [`mfssize`](#mfssize)
* [`tmpfs`](#tmpfs)
* [`distfiles_cache`](#distfiles_cache)
* [`csup_host`](#csup_host)
* [`svn_host`](#svn_host)
* [`check_changed_options`](#check_changed_options)
* [`check_changed_deps`](#check_changed_deps)
* [`pkg_repo_signing_key`](#pkg_repo_signing_key)
* [`parallel_jobs`](#parallel_jobs)
* [`save_wrkdir`](#save_wrkdir)
* [`wrkdir_archive_format`](#wrkdir_archive_format)
* [`nolinux`](#nolinux)
* [`no_package_building`](#no_package_building)
* [`no_restricted`](#no_restricted)
* [`allow_make_jobs`](#allow_make_jobs)
* [`url_base`](#url_base)
* [`max_execution_time`](#max_execution_time)
* [`nohang_time`](#nohang_time)
* [`http_proxy`](#http_proxy)
* [`ftp_proxy`](#ftp_proxy)
* [`build_as_non_root`](#build_as_non_root)
* [`environments`](#environments)
* [`portstrees`](#portstrees)
* [`xbuild_package`](#xbuild_package)

##### <a name="zpool"></a>`zpool`

Data type: `String`

The pool where poudriere will create all the filesystems

Default value: `'tank'`

##### <a name="zrootfs"></a>`zrootfs`

Data type: `Stdlib::Absolutepath`

The root of the poudriere zfs filesystem

Default value: `'/poudriere'`

##### <a name="freebsd_host"></a>`freebsd_host`

Data type: `String`

The host where to download sets for the jails setup

Default value: `'http://ftp6.us.freebsd.org/'`

##### <a name="resolv_conf"></a>`resolv_conf`

Data type: `Stdlib::Absolutepath`

A file on your hosts system that will be copied has /etc/resolv.conf for the jail

Default value: `'/etc/resolv.conf'`

##### <a name="ccache_enable"></a>`ccache_enable`

Data type: `Boolean`

Enable ccache

Default value: ``false``

##### <a name="ccache_dir"></a>`ccache_dir`

Data type: `Stdlib::Absolutepath`

Path to the ccache cache directory

Default value: `'/var/cache/ccache'`

##### <a name="poudriere_base"></a>`poudriere_base`

Data type: `Stdlib::Absolutepath`

The directory where poudriere will store jails and ports

Default value: `'/usr/local/poudriere'`

##### <a name="poudriere_data"></a>`poudriere_data`

Data type: `String`

The directory where the jail will store the packages and logs

Default value: `'${BASEFS}/data'`

##### <a name="use_portlint"></a>`use_portlint`

Data type: `Enum['yes', 'no']`

Use portlint to check ports sanity

Default value: `'no'`

##### <a name="mfssize"></a>`mfssize`

Data type: `Optional[String]`

Size of WRKDIRPREFIX when using mdmfs

Default value: ``undef``

##### <a name="tmpfs"></a>`tmpfs`

Data type: `Enum['yes', 'no']`

Use tmpfs(5)

Default value: `'yes'`

##### <a name="distfiles_cache"></a>`distfiles_cache`

Data type: `Stdlib::Absolutepath`

Directory used for the distfiles

Default value: `'/usr/ports/distfiles'`

##### <a name="csup_host"></a>`csup_host`

Data type: `Optional[String]`

Mirror to use for the ports tree or source tree when using CVS

Default value: ``undef``

##### <a name="svn_host"></a>`svn_host`

Data type: `Optional[String]`

Mirror to use for the ports tree or source tree when using SVN

Default value: ``undef``

##### <a name="check_changed_options"></a>`check_changed_options`

Data type: `Enum['yes', 'no', 'verbose']`

Enable automatic OPTION change detection

Default value: `'verbose'`

##### <a name="check_changed_deps"></a>`check_changed_deps`

Data type: `Enum['yes', 'no']`

Enable automatic dependency change detection

Default value: `'yes'`

##### <a name="pkg_repo_signing_key"></a>`pkg_repo_signing_key`

Data type: `String`

Path to the RSA key to sign the PKG repo with

Default value: `''`

##### <a name="parallel_jobs"></a>`parallel_jobs`

Data type: `Integer[1]`

Override the number of builders

Default value: `$facts['processors']['count']`

##### <a name="save_wrkdir"></a>`save_wrkdir`

Data type: `String`

Save the WRKDIR to ${POUDRIERE_DATA}/wrkdirs on failure

Default value: `''`

##### <a name="wrkdir_archive_format"></a>`wrkdir_archive_format`

Data type: `String`

Format for the workdir packing

Default value: `''`

##### <a name="nolinux"></a>`nolinux`

Data type: `String`

Disable Linux support

Default value: `''`

##### <a name="no_package_building"></a>`no_package_building`

Data type: `String`

Do not set PACKAGE_BUILDING

Default value: `''`

##### <a name="no_restricted"></a>`no_restricted`

Data type: `String`

Cleanout the restricted packages

Default value: `''`

##### <a name="allow_make_jobs"></a>`allow_make_jobs`

Data type: `String`

Do not bound the number of processes to the number of cores

Default value: `''`

##### <a name="url_base"></a>`url_base`

Data type: `String`

URL where your POUDRIERE_DATA/logs are hosted

Default value: `''`

##### <a name="max_execution_time"></a>`max_execution_time`

Data type: `String`

Set the max time (in seconds) that a command may run for a build before it is killed for taking too long

Default value: `''`

##### <a name="nohang_time"></a>`nohang_time`

Data type: `String`

Set the time (in seconds) before a command is considered to be in a runaway state for having no output on stdout

Default value: `''`

##### <a name="http_proxy"></a>`http_proxy`

Data type: `String`

HTTP proxy

Default value: `''`

##### <a name="ftp_proxy"></a>`ftp_proxy`

Data type: `String`

FTP proxy

Default value: `''`

##### <a name="build_as_non_root"></a>`build_as_non_root`

Data type: `String`

Build and stage as a regular user

Default value: `''`

##### <a name="environments"></a>`environments`

Data type: `Hash`

Build environments to manage

Default value: `{}`

##### <a name="portstrees"></a>`portstrees`

Data type: `Hash`

Port trees to manage

Default value: `{}`

##### <a name="xbuild_package"></a>`xbuild_package`

Data type: `String[1]`

Package to install for cross-building packages

Default value: `'qemu-user-static'`

### <a name="poudrierexbuild"></a>`poudriere::xbuild`

Install cross-building dependencies

## Defined types

### <a name="poudriereenv"></a>`poudriere::env`

This resource creates a build environment for a given release and architecture
of FreeBSD. Passing in custom options gives you the ability to turn on and
off certain features of your ports. Specific make options you would put in
make.conf, you can pass here as well.
Automatic periodic building of packages is managed with the cron_enable
parameter

#### Parameters

The following parameters are available in the `poudriere::env` defined type:

* [`ensure`](#ensure)
* [`makeopts`](#makeopts)
* [`makefile`](#makefile)
* [`version`](#version)
* [`arch`](#arch)
* [`jail`](#jail)
* [`paralleljobs`](#paralleljobs)
* [`pkgs`](#pkgs)
* [`pkg_file`](#pkg_file)
* [`pkg_makeopts`](#pkg_makeopts)
* [`pkg_optsdir`](#pkg_optsdir)
* [`portstree`](#portstree)
* [`cron_enable`](#cron_enable)
* [`cron_always_mail`](#cron_always_mail)
* [`cron_interval`](#cron_interval)

##### <a name="ensure"></a>`ensure`

Data type: `Enum['present', 'absent']`

The desired state of this environment

Default value: `'present'`

##### <a name="makeopts"></a>`makeopts`

Data type: `Array[String[1]]`

Build options

Default value: `[]`

##### <a name="makefile"></a>`makefile`

Data type: `Optional[Stdlib::Absolutepath]`

Path to a Makefile

Default value: ``undef``

##### <a name="version"></a>`version`

Data type: `String[1]`

Version of the jail

Default value: `'10.0-RELEASE'`

##### <a name="arch"></a>`arch`

Data type: `Optional[Poudriere::Architecture]`

Architecture of the jail

Default value: ``undef``

##### <a name="jail"></a>`jail`

Data type: `String[1]`

Name of the jail

Default value: `$name`

##### <a name="paralleljobs"></a>`paralleljobs`

Data type: `Integer[1]`

Override the number of builders

Default value: `$facts['processors']['count']`

##### <a name="pkgs"></a>`pkgs`

Data type: `Array[String[1]]`

List of packages to build

Default value: `[]`

##### <a name="pkg_file"></a>`pkg_file`

Data type: `Optional[Stdlib::Absolutepath]`

Puppet path to a list of packages to build

Default value: ``undef``

##### <a name="pkg_makeopts"></a>`pkg_makeopts`

Data type: `Hash`

Per package build options

Default value: `{}`

##### <a name="pkg_optsdir"></a>`pkg_optsdir`

Data type: `Optional[Stdlib::Absolutepath]`

Path to a directory of build options

Default value: ``undef``

##### <a name="portstree"></a>`portstree`

Data type: `String[1]`

The port tree to use

Default value: `'default'`

##### <a name="cron_enable"></a>`cron_enable`

Data type: `Boolean`

Enable automatic updates

Default value: ``false``

##### <a name="cron_always_mail"></a>`cron_always_mail`

Data type: `Boolean`

Always send an e-mail on update

Default value: ``false``

##### <a name="cron_interval"></a>`cron_interval`

Data type: `Poudriere::Cron_interval`

Scheduling of automatic updates

Default value: `{ minute => 0, hour => 0, monthday => '*', month => '*', weekday => '*' }`

### <a name="poudriereportstree"></a>`poudriere::portstree`

This resource creates a ports tree. You can have multiple ports trees for different
building purposes. Automatic periodic updating of packages is managed with the cron_enable
parameter

#### Parameters

The following parameters are available in the `poudriere::portstree` defined type:

* [`ensure`](#ensure)
* [`portstree`](#portstree)
* [`branch`](#branch)
* [`fetch_method`](#fetch_method)
* [`mountpoint`](#mountpoint)
* [`cron_enable`](#cron_enable)
* [`cron_always_mail`](#cron_always_mail)
* [`cron_interval`](#cron_interval)

##### <a name="ensure"></a>`ensure`

Data type: `Enum['present', 'absent']`

The desired state of this ports tree

Default value: `'present'`

##### <a name="portstree"></a>`portstree`

Data type: `String[1]`

Name of the ports tree

Default value: `$name`

##### <a name="branch"></a>`branch`

Data type: `Optional[String[1]]`

Branch to checkout when using the svn or git methods

Default value: ``undef``

##### <a name="fetch_method"></a>`fetch_method`

Data type: `Poudriere::Fetch_method`

Specify which method to use to create the ports tree

Default value: `'svn'`

##### <a name="mountpoint"></a>`mountpoint`

Data type: `Optional[Stdlib::Absolutepath]`

Path to the source of a ports tree.

Default value: ``undef``

##### <a name="cron_enable"></a>`cron_enable`

Data type: `Boolean`

Enable automatic updates

Default value: ``false``

##### <a name="cron_always_mail"></a>`cron_always_mail`

Data type: `Boolean`

Always send an e-mail on update

Default value: ``false``

##### <a name="cron_interval"></a>`cron_interval`

Data type: `Poudriere::Cron_interval`

Scheduling of automatic updates

Default value: `{ minute => 0, hour => 22, monthday => '*', month => '*', week => '*' }`

## Data types

### <a name="poudrierearchitecture"></a>`Poudriere::Architecture`

The architecture to target when building packages

* **Note** This list can be obtained from the FreeBSD src directory with `make targets | awk -F '( +|/)' 'NR > 1 { if ($2 == $3) { print $2 }; print $2"."$3 }'`

Alias of

```puppet
Enum['amd64', 'amd64.amd64', 'arm', 'arm.arm', 'arm.armv6', 'arm.armv7', 'arm64.aarch64', 'i386', 'i386.i386', 'mips.mipsel', 'mips', 'mips.mips', 'mips.mips64el', 'mips.mips64', 'mips.mipsn32', 'mips.mipselhf', 'mips.mipshf', 'mips.mips64elhf', 'mips.mips64hf', 'powerpc', 'powerpc.powerpc', 'powerpc.powerpc64', 'powerpc.powerpcspe', 'riscv.riscv64', 'riscv.riscv64sf', 'sparc64', 'sparc64.sparc64']
```

### <a name="poudrierecron_interval"></a>`Poudriere::Cron_interval`

Parameters to configure Poudriere's cron resources

Alias of

```puppet
Struct[{
    minute   => Optional[Variant[Integer, String]],
    hour     => Optional[Variant[Integer, String]],
    monthday => Optional[String],
    month    => Optional[String],
    week     => Optional[String],
    weekday  => Optional[String],
  }]
```

### <a name="poudrierefetch_method"></a>`Poudriere::Fetch_method`

A supported fetch method for poudriere

Alias of

```puppet
Enum['git', 'git+http', 'git+https', 'git+ssh', 'null', 'portsnap', 'svn', 'svn+file', 'svn+http', 'svn+https', 'svn+ssh']
```

